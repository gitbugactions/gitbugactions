{"repository": "EsotericSoftware/yamlbeans", "clone_url": "https://github.com/EsotericSoftware/yamlbeans.git", "timestamp": "2023-05-30T19:18:13.854303Z", "commit_hash": "2fa34e7acf30cb8a56d0d50040f58843355ed5ed", "commit_message": "fix bug (#139)\n\n", "related_issues": "", "bug_patch": "diff --git a/src/com/esotericsoftware/yamlbeans/tokenizer/Tokenizer.java b/src/com/esotericsoftware/yamlbeans/tokenizer/Tokenizer.java\nindex 7d97815..186963a 100644\n--- a/src/com/esotericsoftware/yamlbeans/tokenizer/Tokenizer.java\n+++ b/src/com/esotericsoftware/yamlbeans/tokenizer/Tokenizer.java\n@@ -945,7 +945,7 @@ public class Tokenizer {\n \t\t\tchunks.append(prefixForward(length));\n \t\t\t// forward(length);\n \t\t\tspaces = scanPlainSpaces();\n-\t\t\tif (spaces == null || flowLevel == 0 && column < ind) break;\n+\t\t\tif (spaces.length() == 0 || flowLevel == 0 && column < ind) break;\n \t\t}\n \t\treturn new ScalarToken(chunks.toString(), true);\n \t}\n", "test_patch": "diff --git a/test/com/esotericsoftware/yamlbeans/YamlReaderTest.java b/test/com/esotericsoftware/yamlbeans/YamlReaderTest.java\nindex cd91efe..f860fa2 100644\n--- a/test/com/esotericsoftware/yamlbeans/YamlReaderTest.java\n+++ b/test/com/esotericsoftware/yamlbeans/YamlReaderTest.java\n@@ -538,4 +538,23 @@ public class YamlReaderTest extends TestCase {\n         reader = new YamlReader(stringWithSpaceAndTab);\r\n         assertEquals(stringWithSpaceAndTab, reader.read(String.class));\r\n     }\r\n+\r\n+\t/**\r\n+\t * Test multiple documents, the document is a scalar, followed by \"---\" or\r\n+\t * \"...\", the test read is normal.\r\n+\t *\r\n+\t * @throws YamlException\r\n+\t */\r\n+\tpublic void testReadMultiTpyeDocuments() throws YamlException {\r\n+\t\tString yaml = \"scalar\\n---\\nkey: value\\n---\\nscalar\\n...\\n\";\r\n+\t\tYamlReader reader = new YamlReader(yaml);\r\n+\t\tString str = reader.read(String.class);\r\n+\t\tassertEquals(\"scalar\", str);\r\n+\r\n+\t\tMap<String, String> map = (Map<String, String>) reader.read(HashMap.class);\r\n+\t\tassertEquals(\"value\", map.get(\"key\"));\r\n+\r\n+\t\tstr = reader.read(String.class);\r\n+\t\tassertEquals(\"scalar\", str);\r\n+\t}\r\n }\r\n"}
