{"repository": "dkpro/dkpro-jwktl", "clone_url": "https://github.com/dkpro/dkpro-jwktl.git", "language": "java", "timestamp": "2023-05-31T19:02:37.595488Z", "previous_commit_hash": "14d0ecc12f3e667e45e1b07e9569b1f2c1bc0f4a", "commit_hash": "4f302e81e1bb7668a98dd098bec5b1da31535490", "commit_message": "Fix parsing of audio pronunciation with lang= tag\n\nHandle both forms of audio pronunciations markups present in English\nWiktionary:\n\n* {{audio|en-us-battle.ogg|Audio (US)}\n* {{audio|en-us-battle.ogg|Audio (US)|lang=en}}\n\nPreviously the latter wasn't recognized.\n\nAdd a corresponding test to ENPronunciationHandlerTest.\n", "related_issues": "", "bug_patch": "diff --git a/src/main/java/de/tudarmstadt/ukp/jwktl/parser/en/components/ENPronunciationHandler.java b/src/main/java/de/tudarmstadt/ukp/jwktl/parser/en/components/ENPronunciationHandler.java\nindex 05db353..56fb7b4 100644\n--- a/src/main/java/de/tudarmstadt/ukp/jwktl/parser/en/components/ENPronunciationHandler.java\n+++ b/src/main/java/de/tudarmstadt/ukp/jwktl/parser/en/components/ENPronunciationHandler.java\n@@ -37,7 +37,7 @@ public class ENPronunciationHandler extends ENBlockHandler {\n \t\n \tprotected static final Pattern PRONUNCIATION_CONTEXT = Pattern.compile(\"\\\\{\\\\{(?:a|sense)\\\\|([^\\\\}\\\\|]+?)\\\\}\\\\}\");\n \tprotected static final Pattern PRONUNCIATION = Pattern.compile(\"\\\\{\\\\{(?:IPA|SAMPA)\\\\|.+?\\\\}\\\\}\");\n-\tprotected static final Pattern PRONUNCIATION_AUDIO = Pattern.compile(\"\\\\{\\\\{audio\\\\|([^\\\\}\\\\|]+?)(?:\\\\|([^\\\\}\\\\|]+?))?\\\\}\\\\}\");\n+\tprotected static final Pattern PRONUNCIATION_AUDIO = Pattern.compile(\"\\\\{\\\\{audio\\\\|([^\\\\}\\\\|]+?)(?:\\\\|([^\\\\}\\\\|]+?)(?:\\\\|lang=[^\\\\}\\\\|]+)?)?\\\\}\\\\}\");\n \tprotected static final Pattern PRONUNCIATION_RYHME = Pattern.compile(\"\\\\{\\\\{rhymes\\\\|([^\\\\}\\\\|]+?)\\\\}\\\\}\");\n \t\n \tprotected List<IPronunciation> pronunciations;\n", "test_patch": "diff --git a/src/test/java/de/tudarmstadt/ukp/jwktl/parser/en/components/ENPronunciationHandlerTest.java b/src/test/java/de/tudarmstadt/ukp/jwktl/parser/en/components/ENPronunciationHandlerTest.java\nindex 436348a..548b204 100644\n--- a/src/test/java/de/tudarmstadt/ukp/jwktl/parser/en/components/ENPronunciationHandlerTest.java\n+++ b/src/test/java/de/tudarmstadt/ukp/jwktl/parser/en/components/ENPronunciationHandlerTest.java\n@@ -126,8 +126,8 @@ public class ENPronunciationHandlerTest extends ENWiktionaryEntryParserTest {\n \t\tw.processBody(\"* {{audio|en-uk-dictionary.ogg|Audio (UK)}}\", null);\n \n \t\tw.processBody(\"* {{IPA|/f\u0279i\u02d0/}}, {{SAMPA|/fri:/}}\", null);\n-\t\tw.processBody(\"* {{audio|en-us-free.ogg|Audio (US)}}\", null);\n-\t\tw.processBody(\"* {{audio|En-uk-free.ogg|Audio (UK)}}\", null);\n+\t\tw.processBody(\"* {{audio|en-us-free.ogg|Audio (US)|lang=en}}\", null);\n+\t\tw.processBody(\"* {{audio|En-uk-free.ogg|Audio (UK)|lang=en}}\", null);\n \t\tw.processBody(\"*: {{rhymes|i\u02d0}}\", null);\n \n \t\tw.processBody(\"* {{a|RP}} {{IPA|/d\u0252\u0261/}}, {{SAMPA|/dQg/}}\", null);\n"}