{"repository": "abel533/Mapper", "clone_url": "https://github.com/abel533/Mapper.git", "timestamp": "2023-05-31T19:03:23.358935Z", "commit_hash": "34b9dafac9d73ac49b42cb353034e073da7093a0", "commit_message": "fixed\n", "related_issues": "", "bug_patch": "diff --git a/README.md b/README.md\nindex 54d1c62..46e29d0 100644\n--- a/README.md\n+++ b/README.md\n@@ -108,11 +108,15 @@ http://repo1.maven.org/maven2/javax/persistence/persistence-api/1.0/\n \n ##Maven\u5750\u6807\u4ee5\u53ca\u4e0b\u8f7d\u5730\u5740\n \n-###\u6d4b\u8bd5\u7248\u672c3.1.3-SNAPSHOT - 2015-07-14\n+###\u6d4b\u8bd5\u7248\u672c3.1.3-SNAPSHOT- 2015-08-02\n \n * \u65b0\u589e`MapperOnceInterceptor`\u62e6\u622a\u5668\uff0c\u8be5\u62e6\u622a\u5668\u6267\u884c\u540e\u4f1a\u81ea\u52a8\u5378\u8f7d\uff0c\u4ee5\u540e\u4e0d\u4f1a\u518d\u8fdb\u5165\u8be5\u65b9\u6cd5\uff0c\u53ea\u9700\u8981\u5c06`MapperInterceptor`\u66ff\u6362\u4e3a`MapperOnceInterceptor`\u5373\u53ef\n-* \u7531\u4e8e`MapperHelper`\u7684\u914d\u7f6e\u65b9\u5f0f\u5bb9\u6613\u51fa\u73b0\u9519\u8bef\uff0c\u56e0\u6b64\u4ece3.1.3\u4ee5\u540e\u5e9f\u5f03\u8fd9\u79cd\u914d\u7f6e\u65b9\u6cd5\n+* \u5927\u5bb6\u53ef\u4ee5\u5c1d\u8bd5`MapperOnceInterceptor`\u62e6\u622a\u5668\uff0c\u53d1\u73b0\u95ee\u9898\u53ef\u4ee5\u63d0issue\n+* \u7531\u4e8eSpring\u4e2d\u7684`MapperHelper`\u7684\u914d\u7f6e\u65b9\u5f0f\u5bb9\u6613\u51fa\u73b0\u9519\u8bef\uff0c\u56e0\u6b64\u4ece3.1.3\u4ee5\u540e\u5e9f\u5f03\u8fd9\u79cd\u914d\u7f6e\u65b9\u6cd5\n * `Example`\u589e\u52a0`andEqualTo(\u5b9e\u4f53\u5bf9\u8c61)`\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5c06\u4e00\u4e2a\u5b9e\u4f53\u653e\u8fdb\u53bb\uff0c\u4f1a\u81ea\u52a8\u6839\u636e\u5c5e\u6027\u548c\u503c\u62fc\u51facolumn=value\u7684\u6761\u4ef6 <b>Bob - 0haizhu0@gmail.com \u63d0\u4f9b</b>\n+* MyBatis\u5728\u5904\u7406`<cache/>`\u548c`@CacheNamespace`\u7684\u65f6\u5019\u4e0d\u7edf\u4e00\uff0c\u53ea\u6709\u4e00\u4e2a\u80fd\u751f\u6548\uff0c\u8fd9\u5bfc\u81f4xml\u4e2d\u914d\u7f6e\u4e8c\u7ea7\u7f13\u5b58\u5bf9\u901a\u7528Mapper\u6ce8\u89e3\u5f62\u5f0f\u7684\u65b9\u6cd5\u65e0\u6548\uff0c\u8be5\u95ee\u9898\u5df2\u89e3\u51b3\n+* \u4e8c\u7ea7\u7f13\u5b58\u914d\u7f6e\u65b9\u6cd5\uff0c\u5982\u679c\u63a5\u53e3\u6709\u5bf9\u5e94\u7684xml\uff0c\u5728xml\u4e2d\u914d\u7f6e\u4e8c\u7ea7\u7f13\u5b58\u3002\u5982\u679c\u53ea\u6709\u63a5\u53e3\u6ca1\u6709xml\uff0c\u7528\u6ce8\u89e3\u914d\u7f6e\u4e8c\u7ea7\u7f13\u5b58\u5373\u53ef\n+* \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e8c\u7ea7\u7f13\u5b58\u5728xml\u914d\u7f6e\u65f6\uff0c\u53ea\u5bf9\u901a\u7528Mapper\u65b9\u6cd5\u6709\u6548\uff0c\u81ea\u5df1\u7528`@Select`\u7b49\u6ce8\u89e3\u5b9a\u4e49\u7684\u8fd9\u79cd\u4ecd\u7136\u65e0\u6548\uff0c\u8fd9\u79cd\u60c5\u51b5\u53ea\u80fd\u5728xml\u4e2d\u5b9a\u4e49\n \n ###\u6700\u65b0\u7248\u672c3.1.2 - 2015-07-14\n \ndiff --git a/src/main/java/tk/mybatis/mapper/mapperhelper/EntityHelper.java b/src/main/java/tk/mybatis/mapper/mapperhelper/EntityHelper.java\nindex 9fe54d2..a849f6f 100644\n--- a/src/main/java/tk/mybatis/mapper/mapperhelper/EntityHelper.java\n+++ b/src/main/java/tk/mybatis/mapper/mapperhelper/EntityHelper.java\n@@ -128,7 +128,7 @@ public class EntityHelper {\n                 if (entityColumn.getColumn().substring(1, entityColumn.getColumn().length() - 1).equalsIgnoreCase(entityColumn.getProperty())) {\n                     selectBuilder.append(\",\");\n                 } else {\n-                    selectBuilder.append(\" \").append(entityColumn.getProperty()).append(\",\");\n+                    selectBuilder.append(\" AS \").append(entityColumn.getProperty()).append(\",\");\n                 }\n             } else {\n                 selectBuilder.append(\",\");\ndiff --git a/src/main/java/tk/mybatis/mapper/mapperhelper/MapperTemplate.java b/src/main/java/tk/mybatis/mapper/mapperhelper/MapperTemplate.java\nindex c9e67d4..05f6804 100644\n--- a/src/main/java/tk/mybatis/mapper/mapperhelper/MapperTemplate.java\n+++ b/src/main/java/tk/mybatis/mapper/mapperhelper/MapperTemplate.java\n@@ -24,6 +24,7 @@\n \n package tk.mybatis.mapper.mapperhelper;\n \n+import org.apache.ibatis.cache.Cache;\n import org.apache.ibatis.executor.keygen.Jdbc3KeyGenerator;\n import org.apache.ibatis.executor.keygen.KeyGenerator;\n import org.apache.ibatis.executor.keygen.NoKeyGenerator;\n@@ -128,6 +129,29 @@ public abstract class MapperTemplate {\n     }\n \n     /**\n+     * check ms cache\n+     *\n+     * @param ms\n+     * @throws Exception\n+     */\n+    private void checkCache(MappedStatement ms) throws Exception {\n+        if(ms.getCache() == null){\n+            String nameSpace = ms.getId().substring(0, ms.getId().lastIndexOf(\".\"));\n+            Cache cache = null;\n+            try {\n+                //\u4e0d\u5b58\u5728\u7684\u65f6\u5019\u4f1a\u629b\u51fa\u5f02\u5e38\n+                cache = ms.getConfiguration().getCache(nameSpace);\n+            } catch (IllegalArgumentException e) {\n+                return;\n+            }\n+            if(cache != null){\n+                MetaObject metaObject = SystemMetaObject.forObject(ms);\n+                metaObject.setValue(\"cache\", cache);\n+            }\n+        }\n+    }\n+\n+    /**\n      * \u91cd\u65b0\u8bbe\u7f6eSqlSource\n      *\n      * @param ms\n@@ -163,6 +187,8 @@ public abstract class MapperTemplate {\n             } else {\n                 throw new RuntimeException(\"\u81ea\u5b9a\u4e49Mapper\u65b9\u6cd5\u8fd4\u56de\u7c7b\u578b\u9519\u8bef,\u53ef\u9009\u7684\u8fd4\u56de\u7c7b\u578b\u4e3avoid,SqlNode,String\u4e09\u79cd!\");\n             }\n+            //cache\n+            checkCache(ms);\n         } catch (IllegalAccessException e) {\n             throw new RuntimeException(e);\n         } catch (InvocationTargetException e) {\ndiff --git a/src/test/resources/CachedCountryMapper.xml b/src/test/resources/CachedCountryMapper.xml\nnew file mode 100644\nindex 0000000..3144100\n--- /dev/null\n+++ b/src/test/resources/CachedCountryMapper.xml\n@@ -0,0 +1,35 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ The MIT License (MIT)\n+  ~\n+  ~ Copyright (c) 2014 abel533@gmail.com\n+  ~\n+  ~ Permission is hereby granted, free of charge, to any person obtaining a copy\n+  ~ of this software and associated documentation files (the \"Software\"), to deal\n+  ~ in the Software without restriction, including without limitation the rights\n+  ~ to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+  ~ copies of the Software, and to permit persons to whom the Software is\n+  ~ furnished to do so, subject to the following conditions:\n+  ~\n+  ~ The above copyright notice and this permission notice shall be included in\n+  ~ all copies or substantial portions of the Software.\n+  ~\n+  ~ THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+  ~ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+  ~ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+  ~ AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+  ~ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+  ~ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+  ~ THE SOFTWARE.\n+  -->\n+\n+<!DOCTYPE mapper\n+        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n+        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n+\n+<mapper namespace=\"tk.mybatis.mapper.mapper.CachedCountryMapper\">\n+    <cache/>\n+    <select id=\"selectCache\" resultType=\"int\">\n+        select * from country where id = #{id}\n+    </select>\n+</mapper>\n", "test_patch": "diff --git a/src/test/java/tk/mybatis/mapper/mapper/CachedCountryMapper.java b/src/test/java/tk/mybatis/mapper/mapper/CachedCountryMapper.java\nindex 6a5b1e7..ec3962e 100644\n--- a/src/test/java/tk/mybatis/mapper/mapper/CachedCountryMapper.java\n+++ b/src/test/java/tk/mybatis/mapper/mapper/CachedCountryMapper.java\n@@ -32,6 +32,7 @@ import org.apache.ibatis.annotations.CacheNamespace;\n /**\n  * Created by liuzh on 2014/11/19.\n  */\n-@CacheNamespace\n+//@CacheNamespace\n public interface CachedCountryMapper extends Mapper<Country>,HsqldbMapper<Country> {\n+    int selectCache(int id);\n }\ndiff --git a/src/test/java/tk/mybatis/mapper/test/country/TestCache.java b/src/test/java/tk/mybatis/mapper/test/country/TestCache.java\nindex db45da8..4dde46c 100644\n--- a/src/test/java/tk/mybatis/mapper/test/country/TestCache.java\n+++ b/src/test/java/tk/mybatis/mapper/test/country/TestCache.java\n@@ -47,8 +47,6 @@ public class TestCache {\n             country.setCountrycode(\"CN\");\n             //\u7b2c\u4e00\u6b21\u67e5\u8be2\uff0c\u4f1a\u88ab\u7f13\u5b58\n             country = mapper.selectOne(country);\n-            Assert.assertEquals(true, country.getId() == 35);\n-            Assert.assertEquals(\"China\", country.getCountryname());\n             //\u53ea\u6709close\u624d\u4f1a\u771f\u6b63\u7f13\u5b58\uff0c\u800c\u4e0d\u662f\u7528\u4e00\u7ea7\u7f13\u5b58\n             sqlSession.close();\n \n@@ -59,44 +57,26 @@ public class TestCache {\n             country.setCountrycode(\"CN\");\n             //\u7b2c\u4e8c\u6b21\u67e5\u8be2\uff0c\u4f1a\u4f7f\u7528\u7b2c\u4e00\u6b21\u7684\u7f13\u5b58\n             country = mapper.selectOne(country);\n-\n-            Assert.assertEquals(true, country.getId() == 35);\n-            Assert.assertEquals(\"China\", country.getCountryname());\n             //\u53ea\u6709close\u624d\u4f1a\u771f\u6b63\u7f13\u5b58\uff0c\u800c\u4e0d\u662f\u7528\u4e00\u7ea7\u7f13\u5b58\n             sqlSession.close();\n+        } finally {\n+            sqlSession.close();\n+        }\n+    }\n \n-            //======================================================================\n-            sqlSession = MybatisHelper.getSqlSession();\n-            mapper = sqlSession.getMapper(CachedCountryMapper.class);\n-\n-            country = new Country();\n-            country.setCountryname(\"\u5929\u671d\");\n-            country.setId(35);\n-            //\u66f4\u65b0\u64cd\u4f5c\u4f1a\u6e05\u7a7a\u7f13\u5b58\n-            int result = mapper.updateByPrimaryKeySelective(country);\n-            Assert.assertEquals(1, result);\n-            sqlSession.commit();\n+    @Test\n+    public void testCache2() {\n+        SqlSession sqlSession = MybatisHelper.getSqlSession();\n+        try {\n+            //\u7b2c\u4e00\u6b21\u67e5\u8be2\uff0c\u4f1a\u88ab\u7f13\u5b58\n+            sqlSession.selectOne(\"selectCache\", 35);\n             //\u53ea\u6709close\u624d\u4f1a\u771f\u6b63\u7f13\u5b58\uff0c\u800c\u4e0d\u662f\u7528\u4e00\u7ea7\u7f13\u5b58\n             sqlSession.close();\n \n             //======================================================================\n             sqlSession = MybatisHelper.getSqlSession();\n-            mapper = sqlSession.getMapper(CachedCountryMapper.class);\n-            country = new Country();\n-            country.setCountrycode(\"CN\");\n-            //\u7b2c\u4e09\u6b21\u67e5\u8be2\uff0c\u4f1a\u91cd\u65b0\u67e5\u8be2\uff0c\u4e0d\u4f7f\u7528\u7f13\u5b58\n-            country = mapper.selectOne(country);\n-\n-            Assert.assertEquals(true, country.getId() == 35);\n-            Assert.assertEquals(\"\u5929\u671d\", country.getCountryname());\n-\n-            country = new Country();\n-            country.setCountryname(\"China\");\n-            country.setId(35);\n-            //\u8fd8\u539f\n-            result = mapper.updateByPrimaryKeySelective(country);\n-            sqlSession.commit();\n-            Assert.assertEquals(1, result);\n+            sqlSession.selectOne(\"selectCache\", 35);\n+            sqlSession.close();\n         } finally {\n             sqlSession.close();\n         }\ndiff --git a/src/test/java/tk/mybatis/mapper/test/jdbc/TestJDBC.java b/src/test/java/tk/mybatis/mapper/test/jdbc/TestJDBC.java\nindex 72b6fea..48d4b56 100644\n--- a/src/test/java/tk/mybatis/mapper/test/jdbc/TestJDBC.java\n+++ b/src/test/java/tk/mybatis/mapper/test/jdbc/TestJDBC.java\n@@ -31,7 +31,7 @@ import org.apache.ibatis.session.SqlSession;\n import org.junit.Assert;\n \n /**\n- * sqlserver\u6d4b\u8bd5\n+ * sqlserver\u6d4b\u8bd5 - \u8be5\u7c7b\u6ce8\u91ca\u6240\u6709\u6d4b\u8bd5\u65b9\u6cd5\u662f\u56e0\u4e3a\u8be5\u6d4b\u8bd5\u662f\u9488\u5bf9sqlserver\u7684\uff0c\u800c\u9879\u76ee\u6d4b\u8bd5\u7528\u7684hsqldb\uff0c\u6240\u4ee5\u8fd9\u4e9b\u6d4b\u8bd5\u4e0d\u80fd\u8fd0\u884c\uff0c\u9700\u8981\u6362\u4e3asqlserver\u624d\u53ef\u4ee5\n  */\n public class TestJDBC {\n \ndiff --git a/src/test/resources/mybatis-config.xml b/src/test/resources/mybatis-config.xml\nindex 0141ad5..e9cb52b 100644\n--- a/src/test/resources/mybatis-config.xml\n+++ b/src/test/resources/mybatis-config.xml\n@@ -1,71 +1,72 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n <!DOCTYPE configuration\n-    PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n-    \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n+        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n+        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n \n <configuration>\n-  <settings>\n-    <setting name=\"cacheEnabled\" value=\"true\"/>\n-    <setting name=\"lazyLoadingEnabled\" value=\"false\"/>\n-    <setting name=\"aggressiveLazyLoading\" value=\"true\"/>\n-    <setting name=\"logImpl\" value=\"LOG4J\"/>\n-  </settings>\n+    <settings>\n+        <setting name=\"cacheEnabled\" value=\"true\"/>\n+        <setting name=\"lazyLoadingEnabled\" value=\"false\"/>\n+        <setting name=\"aggressiveLazyLoading\" value=\"true\"/>\n+        <setting name=\"logImpl\" value=\"LOG4J\"/>\n+    </settings>\n \n-  <typeAliases>\n-    <package name=\"tk.mybatis.mapper.model\"/>\n-  </typeAliases>\n+    <typeAliases>\n+        <package name=\"tk.mybatis.mapper.model\"/>\n+    </typeAliases>\n \n-\t<plugins>\n+    <plugins>\n         <plugin interceptor=\"tk.mybatis.mapper.mapperhelper.MapperOnceInterceptor\">\n-\t\t\t<!--================================================-->\n-\t\t\t<!--\u53ef\u914d\u7f6e\u53c2\u6570\u8bf4\u660e(\u4e00\u822c\u65e0\u9700\u4fee\u6539)-->\n-\t\t\t<!--================================================-->\n-\t\t\t<!--UUID\u751f\u6210\u7b56\u7565-->\n-\t\t\t<!--\u914d\u7f6eUUID\u751f\u6210\u7b56\u7565\u9700\u8981\u4f7f\u7528OGNL\u8868\u8fbe\u5f0f-->\n-\t\t\t<!--\u9ed8\u8ba4\u503c32\u4f4d\u957f\u5ea6:@java.util.UUID@randomUUID().toString().replace(\"-\", \"\")-->\n-\t\t\t<!--<property name=\"UUID\" value=\"@java.util.UUID@randomUUID().toString()\"/>-->\n-\t\t\t<!--\u4e3b\u952e\u81ea\u589e\u56de\u5199\u65b9\u6cd5,\u9ed8\u8ba4\u503cMYSQL,\u8be6\u7ec6\u8bf4\u660e\u8bf7\u770b\u6587\u6863-->\n-\t\t\t<property name=\"IDENTITY\" value=\"HSQLDB\"/>\n-      <!--\u5e8f\u5217\u7684\u83b7\u53d6\u89c4\u5219,\u4f7f\u7528{num}\u683c\u5f0f\u5316\u53c2\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a{0}.nextval\uff0c\u9488\u5bf9Oracle-->\n-      <!--\u53ef\u9009\u53c2\u6570\u4e00\u51713\u4e2a\uff0c\u5bf9\u5e940,1,2,\u5206\u522b\u4e3aSequenceName\uff0cColumnName,PropertyName-->\n-\t\t\t<property name=\"seqFormat\" value=\"{0}.nextval\"/>\n-      <!-- \u8bbe\u7f6e\u5168\u5c40\u7684catalog,\u9ed8\u8ba4\u4e3a\u7a7a\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u503c\uff0c\u64cd\u4f5c\u8868\u65f6\u7684sql\u4f1a\u662fcatalog.tablename -->\n-\t\t\t<property name=\"catalog\" value=\"\"/>\n-      <!-- \u8bbe\u7f6e\u5168\u5c40\u7684schema,\u9ed8\u8ba4\u4e3a\u7a7a\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u503c\uff0c\u64cd\u4f5c\u8868\u65f6\u7684sql\u4f1a\u662fschema.tablename -->\n-      <!-- \u5982\u679c\u540c\u65f6\u8bbe\u7f6e\u4e86catalog,\u4f18\u5148\u4f7f\u7528catalog.tablename -->\n-\t\t\t<property name=\"schema\" value=\"\"/>\n-\t\t\t<!--\u4e3b\u952e\u81ea\u589e\u56de\u5199\u65b9\u6cd5\u6267\u884c\u987a\u5e8f,\u9ed8\u8ba4AFTER,\u53ef\u9009\u503c\u4e3a(BEFORE|AFTER)-->\n-\t\t\t<property name=\"ORDER\" value=\"AFTER\"/>\n-\t\t\t<!--\u901a\u7528Mapper\u63a5\u53e3\uff0c\u591a\u4e2a\u7528\u9017\u53f7\u9694\u5f00-->\n-\t\t\t<property name=\"mappers\" value=\"tk.mybatis.mapper.common.Mapper,tk.mybatis.mapper.hsqldb.HsqldbMapper\"/>\n-\t\t</plugin>\n-\t</plugins>\n+            <!--================================================-->\n+            <!--\u53ef\u914d\u7f6e\u53c2\u6570\u8bf4\u660e(\u4e00\u822c\u65e0\u9700\u4fee\u6539)-->\n+            <!--================================================-->\n+            <!--UUID\u751f\u6210\u7b56\u7565-->\n+            <!--\u914d\u7f6eUUID\u751f\u6210\u7b56\u7565\u9700\u8981\u4f7f\u7528OGNL\u8868\u8fbe\u5f0f-->\n+            <!--\u9ed8\u8ba4\u503c32\u4f4d\u957f\u5ea6:@java.util.UUID@randomUUID().toString().replace(\"-\", \"\")-->\n+            <!--<property name=\"UUID\" value=\"@java.util.UUID@randomUUID().toString()\"/>-->\n+            <!--\u4e3b\u952e\u81ea\u589e\u56de\u5199\u65b9\u6cd5,\u9ed8\u8ba4\u503cMYSQL,\u8be6\u7ec6\u8bf4\u660e\u8bf7\u770b\u6587\u6863-->\n+            <property name=\"IDENTITY\" value=\"HSQLDB\"/>\n+            <!--\u5e8f\u5217\u7684\u83b7\u53d6\u89c4\u5219,\u4f7f\u7528{num}\u683c\u5f0f\u5316\u53c2\u6570\uff0c\u9ed8\u8ba4\u503c\u4e3a{0}.nextval\uff0c\u9488\u5bf9Oracle-->\n+            <!--\u53ef\u9009\u53c2\u6570\u4e00\u51713\u4e2a\uff0c\u5bf9\u5e940,1,2,\u5206\u522b\u4e3aSequenceName\uff0cColumnName,PropertyName-->\n+            <property name=\"seqFormat\" value=\"{0}.nextval\"/>\n+            <!-- \u8bbe\u7f6e\u5168\u5c40\u7684catalog,\u9ed8\u8ba4\u4e3a\u7a7a\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u503c\uff0c\u64cd\u4f5c\u8868\u65f6\u7684sql\u4f1a\u662fcatalog.tablename -->\n+            <property name=\"catalog\" value=\"\"/>\n+            <!-- \u8bbe\u7f6e\u5168\u5c40\u7684schema,\u9ed8\u8ba4\u4e3a\u7a7a\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u503c\uff0c\u64cd\u4f5c\u8868\u65f6\u7684sql\u4f1a\u662fschema.tablename -->\n+            <!-- \u5982\u679c\u540c\u65f6\u8bbe\u7f6e\u4e86catalog,\u4f18\u5148\u4f7f\u7528catalog.tablename -->\n+            <property name=\"schema\" value=\"\"/>\n+            <!--\u4e3b\u952e\u81ea\u589e\u56de\u5199\u65b9\u6cd5\u6267\u884c\u987a\u5e8f,\u9ed8\u8ba4AFTER,\u53ef\u9009\u503c\u4e3a(BEFORE|AFTER)-->\n+            <property name=\"ORDER\" value=\"AFTER\"/>\n+            <!--\u901a\u7528Mapper\u63a5\u53e3\uff0c\u591a\u4e2a\u7528\u9017\u53f7\u9694\u5f00-->\n+            <property name=\"mappers\" value=\"tk.mybatis.mapper.common.Mapper,tk.mybatis.mapper.hsqldb.HsqldbMapper\"/>\n+        </plugin>\n+    </plugins>\n \n-\t<environments default=\"development\">\n-\t\t<environment id=\"development\">\n-\t\t\t<transactionManager type=\"JDBC\">\n-\t\t\t\t<property name=\"\" value=\"\" />\n-\t\t\t</transactionManager>\n-\t\t\t<dataSource type=\"UNPOOLED\">\n-\t\t\t\t<property name=\"driver\" value=\"org.hsqldb.jdbcDriver\" />\n-\t\t\t\t<property name=\"url\" value=\"jdbc:hsqldb:mem:basetest\" />\n-\t\t\t\t<property name=\"username\" value=\"sa\" />\n-\t\t\t</dataSource>\n-\t\t</environment>\n-\t</environments>\n+    <environments default=\"development\">\n+        <environment id=\"development\">\n+            <transactionManager type=\"JDBC\">\n+                <property name=\"\" value=\"\"/>\n+            </transactionManager>\n+            <dataSource type=\"UNPOOLED\">\n+                <property name=\"driver\" value=\"org.hsqldb.jdbcDriver\"/>\n+                <property name=\"url\" value=\"jdbc:hsqldb:mem:basetest\"/>\n+                <property name=\"username\" value=\"sa\"/>\n+            </dataSource>\n+        </environment>\n+    </environments>\n \n-\t<mappers>\n-    <mapper class=\"tk.mybatis.mapper.mapper.CountryMapper\" />\n-    <mapper class=\"tk.mybatis.mapper.mapper.Country2Mapper\" />\n-    <mapper class=\"tk.mybatis.mapper.mapper.CountryTMapper\" />\n-    <mapper class=\"tk.mybatis.mapper.mapper.CountryUMapper\" />\n-    <mapper class=\"tk.mybatis.mapper.mapper.CountryJDBCMapper\" />\n-    <mapper class=\"tk.mybatis.mapper.mapper.CountryIMapper\" />\n-    <mapper class=\"tk.mybatis.mapper.mapper.UserInfoMapper\" />\n-    <mapper class=\"tk.mybatis.mapper.mapper.UserInfoMapMapper\" />\n-    <mapper class=\"tk.mybatis.mapper.mapper.UserLoginMapper\" />\n-    <mapper class=\"tk.mybatis.mapper.mapper.UserLogin2Mapper\" />\n-        <mapper class=\"tk.mybatis.mapper.mapper.CachedCountryMapper\"/>\n-\t</mappers>\n+    <mappers>\n+        <mapper resource=\"CachedCountryMapper.xml\"/>\n+        <mapper class=\"tk.mybatis.mapper.mapper.CountryMapper\"/>\n+        <mapper class=\"tk.mybatis.mapper.mapper.Country2Mapper\"/>\n+        <mapper class=\"tk.mybatis.mapper.mapper.CountryTMapper\"/>\n+        <mapper class=\"tk.mybatis.mapper.mapper.CountryUMapper\"/>\n+        <mapper class=\"tk.mybatis.mapper.mapper.CountryJDBCMapper\"/>\n+        <mapper class=\"tk.mybatis.mapper.mapper.CountryIMapper\"/>\n+        <mapper class=\"tk.mybatis.mapper.mapper.UserInfoMapper\"/>\n+        <mapper class=\"tk.mybatis.mapper.mapper.UserInfoMapMapper\"/>\n+        <mapper class=\"tk.mybatis.mapper.mapper.UserLoginMapper\"/>\n+        <mapper class=\"tk.mybatis.mapper.mapper.UserLogin2Mapper\"/>\n+        <!--<mapper class=\"tk.mybatis.mapper.mapper.CachedCountryMapper\"/>-->\n+    </mappers>\n \n </configuration>\ndiff --git a/src/test/resources/mybatis-java.xml b/src/test/resources/mybatis-java.xml\nindex 0c65c3e..0520779 100644\n--- a/src/test/resources/mybatis-java.xml\n+++ b/src/test/resources/mybatis-java.xml\n@@ -37,8 +37,9 @@\n     </environments>\n \n     <mappers>\n+        <mapper resource=\"CachedCountryMapper.xml\"/>\n         <mapper class=\"tk.mybatis.mapper.mapper.CountryMapper\"/>\n-        <mapper class=\"tk.mybatis.mapper.mapper.CachedCountryMapper\"/>\n+        <!--<mapper class=\"tk.mybatis.mapper.mapper.CachedCountryMapper\"/>-->\n         <mapper class=\"tk.mybatis.mapper.mapper.Country2Mapper\"/>\n         <mapper class=\"tk.mybatis.mapper.mapper.CountryTMapper\"/>\n         <mapper class=\"tk.mybatis.mapper.mapper.CountryUMapper\"/>\n"}
